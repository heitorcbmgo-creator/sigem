<!-- 
============================================================
Template: htmx/oficiais_busca_resultado.html
Lista de oficiais encontrados na busca (página Consultar Oficial)
============================================================
-->

{% if not tem_filtros %}
<div class="busca-instrucao">
    <i data-lucide="search" style="width:32px;height:32px;opacity:0.4;"></i>
    <p>Use os filtros acima para buscar um oficial.</p>
    <small class="text-muted">Você pode filtrar por RG, nome, OBM, posto ou quadro.</small>
</div>
{% elif oficiais %}
<div class="busca-info">
    <span class="text-muted">{{ total }} oficial(is) encontrado(s)</span>
</div>
<div class="oficiais-busca-lista">
    {% for o in oficiais %}
    <a href="{% url 'consultar_oficial_id' o.id %}" class="oficial-busca-item">
        <img src="{{ o.foto_url }}" alt="" class="oficial-busca-foto">
        <div class="oficial-busca-info">
            <strong>{{ o.posto }} {{ o.nome_guerra|default:o.nome }}</strong>
            <span class="text-muted">RG: {{ o.rg }} • {{ o.quadro }}</span>
            <span class="text-muted">{{ o.obm|default:"Sem OBM" }}</span>
        </div>
        <div class="oficial-busca-stats">
            <span class="badge badge-success" title="Baixa">{{ o.total_baixa }}</span>
            <span class="badge badge-warning" title="Média">{{ o.total_media }}</span>
            <span class="badge badge-danger" title="Alta">{{ o.total_alta }}</span>
        </div>
        <i data-lucide="chevron-right" class="oficial-busca-arrow"></i>
    </a>
    {% endfor %}
</div>
{% if total >= 20 %}
<div class="busca-aviso">
    <small class="text-muted">Mostrando os primeiros 20 resultados. Refine sua busca para encontrar outros oficiais.</small>
</div>
{% endif %}
{% else %}
<div class="busca-vazio">
    <i data-lucide="user-x" style="width:32px;height:32px;opacity:0.4;"></i>
    <p>Nenhum oficial encontrado.</p>
    <small class="text-muted">Tente ajustar os filtros de busca.</small>
</div>
{% endif %}

<style>
.busca-instrucao,
.busca-vazio {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    text-align: center;
    color: var(--sigem-gray-500);
}

.busca-instrucao p,
.busca-vazio p {
    margin: 0.5rem 0 0.25rem;
    font-weight: 500;
}

.busca-info {
    padding: 0.5rem 1rem;
    border-bottom: 1px solid var(--sigem-gray-200);
    font-size: 0.85rem;
    background: white;
}

.busca-aviso {
    padding: 0.75rem 1rem;
    text-align: center;
    background: var(--sigem-gold-light);
    border-top: 1px solid var(--sigem-gold);
}

.oficiais-busca-lista {
    max-height: 350px;
    overflow-y: auto;
    background: white;
}

.oficial-busca-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--sigem-gray-200);
    text-decoration: none;
    color: inherit;
    transition: var(--transition);
}

.oficial-busca-item:hover {
    background: var(--sigem-red-light);
}

.oficial-busca-item:last-child {
    border-bottom: none;
}

.oficial-busca-foto {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
    border: 2px solid var(--sigem-gray-200);
}

.oficial-busca-item:hover .oficial-busca-foto {
    border-color: var(--sigem-red);
}

.oficial-busca-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-width: 0;
}

.oficial-busca-info strong {
    color: var(--sigem-gray-800);
    font-size: 0.95rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.oficial-busca-info .text-muted {
    font-size: 0.8rem;
    color: var(--sigem-gray-500);
}

.oficial-busca-stats {
    display: flex;
    gap: 0.25rem;
    flex-shrink: 0;
}

.oficial-busca-stats .badge {
    min-width: 24px;
    text-align: center;
    font-size: 0.75rem;
}

.oficial-busca-arrow {
    width: 20px;
    height: 20px;
    color: var(--sigem-gray-400);
    flex-shrink: 0;
    transition: var(--transition);
}

.oficial-busca-item:hover .oficial-busca-arrow {
    color: var(--sigem-red);
    transform: translateX(3px);
}
</style>

<script>
lucide.createIcons();
</script>
<!-- Formulário de Edição de Solicitação de Missão -->
<form hx-post="{% url 'htmx_solicitacao_missao_editar' solicitacao.id %}" 
      hx-target="#modal-feedback" 
      hx-swap="innerHTML">
    {% csrf_token %}
    
    <div class="form-group">
        <label class="form-label">Solicitante</label>
        <input type="text" class="form-input" value="{{ solicitacao.solicitante.posto }} {{ solicitacao.solicitante.nome_guerra }} - {{ solicitacao.solicitante.obm }}" disabled>
    </div>
    
    <div class="form-group">
        <label class="form-label">Nome da Missão <span class="text-danger">*</span></label>
        <input type="text" class="form-input" name="nome_missao" value="{{ solicitacao.nome_missao }}" required>
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label class="form-label">Tipo <span class="text-danger">*</span></label>
            <select class="form-select" name="tipo_missao" required>
                {% for value, label in tipo_choices %}
                <option value="{{ value }}" {% if solicitacao.tipo_missao == value %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label class="form-label">Status da Missão <span class="text-danger">*</span></label>
            <select class="form-select" name="status_missao" required>
                {% for value, label in status_missao_choices %}
                <option value="{{ value }}" {% if solicitacao.status_missao == value %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
            </select>
        </div>
    </div>
    
    <div class="form-group">
        <label class="form-label">Local <span class="text-danger">*</span></label>
        <select class="form-select" name="local" required>
            {% for value, label in local_choices %}
            <option value="{{ value }}" {% if solicitacao.local == value %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
        </select>
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label class="form-label">Data de Início <span class="text-danger">*</span></label>
            <input type="date" class="form-input" name="data_inicio" value="{{ solicitacao.data_inicio|date:'Y-m-d' }}" required>
        </div>
        
        <div class="form-group">
            <label class="form-label">Data de Término</label>
            <input type="date" class="form-input" name="data_fim" value="{% if solicitacao.data_fim %}{{ solicitacao.data_fim|date:'Y-m-d' }}{% endif %}">
        </div>
    </div>
    
    <div class="form-group">
        <label class="form-label">Nº SEI <span class="text-danger">*</span></label>
        <input type="text" class="form-input" name="documento_sei" value="{{ solicitacao.documento_sei }}" required>
    </div>
    
    <div id="modal-feedback"></div>
    
    <div class="form-actions" style="margin-top: 1rem;">
        <button type="button" onclick="fecharModalEditar()" class="btn btn-outline">Cancelar</button>
        <button type="submit" class="btn btn-primary">
            <i data-lucide="save"></i>
            Salvar Alterações
        </button>
    </div>
</form>

<style>
.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}
@media (max-width: 500px) {
    .form-row { grid-template-columns: 1fr; }
}
.form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 0.5rem;
}
</style>
